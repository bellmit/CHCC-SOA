(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3845eb2e"],{"018c":function(t,e,o){},"7c32":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"全部任务",name:"first"}},[o("div",{staticStyle:{"margin-bottom":"10px"}},[o("el-button",{staticClass:"form-btn-diy",attrs:{type:"success",size:"small"},on:{click:function(e){t.dialogFormVisible=!0,t.form.type=1,t.disabled=!1}}},[t._v("新增任务")])],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleSelection",attrs:{data:t.list,"element-loading-text":"Loading",border:"",size:"small",height:"600px","highlight-current-row":""},on:{select:t.showSelect}},[o("el-table-column",{attrs:{align:"center",width:"220",label:"定时任务名称",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.jobName)+"\n              ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"任务分组",width:"220",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.jobGroup))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"定时任务实现类",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.jobClassName))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"时间表达式",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.jobTime))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"定时器类型",width:"220",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",{attrs:{type:"error"}},[t._v(t._s(e.row.schedName))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"任务说明",width:"500",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.description))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"220",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"success",size:"small"},on:{click:function(o){return t.toRun(e.row)}}},[t._v("执行")]),t._v(" "),o("el-button",{attrs:{type:"info",size:"small"},on:{click:function(o){return t.toEdit(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.toDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("div",{staticClass:"b_pagebox"},[o("el-pagination",{ref:"currentPage",attrs:{total:t.listSize,layout:"prev, pager, next"},on:{"current-change":t.currentChange}})],1)],1),t._v(" "),o("el-tab-pane",{attrs:{label:"进行中的任务",name:"last"}},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleSelection",attrs:{data:t.list,"element-loading-text":"Loading",border:"",size:"small",height:"600px","highlight-current-row":""},on:{select:t.showSelect}},[o("el-table-column",{attrs:{align:"center",width:"220",label:"定时任务名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.jobName)+"\n            ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"任务分组",width:"220",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.jobGroupName))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"任务说明",width:"500",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.description))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"时间表达式",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.jobTime))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"任务状态",width:"220",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tag",{attrs:{type:"error"}},[t._v(t._s(e.row.jobStatus))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"success",size:"small"},on:{click:function(o){return t.resumeJob(e.row)}}},[t._v("恢复")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.pauseJob(e.row)}}},[t._v("暂停")])]}}])})],1)],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"编辑定时器任务",visible:t.dialogFormVisible,width:"40%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form,"label-width":"110px"}},[o("el-form-item",{attrs:{label:"定时任务名称:"}},[o("el-input",{staticClass:"from_i_12",attrs:{disabled:t.disabled},model:{value:t.form.jobName,callback:function(e){t.$set(t.form,"jobName",e)},expression:"form.jobName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"任务分组:"}},[o("el-input",{staticClass:"from_i_12",attrs:{disabled:t.disabled},model:{value:t.form.jobGroup,callback:function(e){t.$set(t.form,"jobGroup",e)},expression:"form.jobGroup"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"实现类:"}},[o("el-input",{staticClass:"from_i_12",attrs:{disabled:t.disabled},model:{value:t.form.jobClassName,callback:function(e){t.$set(t.form,"jobClassName",e)},expression:"form.jobClassName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"任务说明:"}},[o("el-input",{staticClass:"from_i_12",attrs:{disabled:t.disabled},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"时间表达式:"}},[o("el-input",{staticClass:"from_i_12",attrs:{placeholder:"时间表达式格式为 * * * * * ?"},model:{value:t.form.jobTime,callback:function(e){t.$set(t.form,"jobTime",e)},expression:"form.jobTime"}})],1),t._v(" "),t.disabled?t._e():o("el-form-item",{attrs:{label:"所需数据:"}},[o("el-input",{staticClass:"from_i_12",attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"数据类型为json,无数据时可为空"},model:{value:t.map,callback:function(e){t.map=e},expression:"map"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},i=[],a=(o("ac6a"),o("c879")),r={data:function(){return{activeName:"first",departmentId:null,list:null,listSize:0,form:{},map:null,listQuery:{offset:1,limmit:10},disabled:!1,listLoading:!1,dialogFormVisible:!1}},watch:{dialogFormVisible:function(t){t||(this.form={},this.map=null)}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(a["d"])(this.listQuery).then((function(e){t.list=e.data.records,t.listLoading=!1,t.listSize=e.data.total}))},runData:function(){var t=this;this.listLoading=!0,Object(a["e"])().then((function(e){t.list=e.data,t.listLoading=!1}))},currentChange:function(){var t=this;this.listQuery.offset=this.$refs.currentPage.internalCurrentPage,this.listLoading=!0,Object(a["d"])(this.listQuery).then((function(e){t.list=e.data.records,t.listLoading=!1,t.listSize=e.data.total}))},showSelect:function(t){var e=[];t.forEach((function(t){e.push(t.id)})),this.rows=e},open2:function(t){this.$notify({title:1e4==t.code?"成功":"错误",message:t.message,type:1e4==t.code?"success":"error"})},addDepartment:function(t){this.form.parentId=t,this.form.type=0,this.dialogFormVisible=!0},toEdit:function(t){this.form={jobClassName:t.jobClassName,jobName:t.jobName,jobGroup:t.jobGroup,description:t.description,jobTime:t.jobTime},this.dialogFormVisible=!0,this.disabled=!0},toDelete:function(t){var e=this;this.form={jobName:t.jobName,jobGroup:t.jobGroup,description:t.description,jobTime:t.jobTime},this.$confirm("是否删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["b"])(e.form).then((function(t){e.open2(t),e.currentChange()}))}))},pauseJob:function(t){var e=this;this.form={jobName:t.jobName,jobGroup:t.jobGroup,description:t.description,jobTime:t.jobTime},Object(a["g"])(this.form).then((function(t){e.open2(t),e.currentChange()}))},resumeJob:function(t){var e=this;this.form={jobName:t.jobName,jobGroup:t.jobGroup,description:t.description,jobTime:t.jobTime},Object(a["h"])(this.form).then((function(t){e.open2(t),e.currentChange()}))},toRun:function(t){var e=this;this.form={jobName:t.jobName,jobGroup:t.jobGroup,description:t.description,jobTime:t.jobTime},Object(a["i"])(this.form).then((function(t){e.open2(t),e.currentChange()}))},onSubmit:function(){var t=this;this.disabled?Object(a["c"])(this.form).then((function(e){t.dialogFormVisible=!1,t.open2(e),t.currentChange()})):(this.form.jobDataMap=JSON.parse(this.map),Object(a["a"])(this.form).then((function(e){t.dialogFormVisible=!1,t.open2(e),t.currentChange()})))},handleClick:function(t,e){"first"==this.activeName?this.currentChange():this.runData()}}},l=r,s=(o("ddf3"),o("2877")),u=Object(s["a"])(l,n,i,!1,null,"23bf05a1",null);e["default"]=u.exports},c879:function(t,e,o){"use strict";o.d(e,"d",(function(){return i})),o.d(e,"e",(function(){return a})),o.d(e,"f",(function(){return r})),o.d(e,"b",(function(){return l})),o.d(e,"g",(function(){return s})),o.d(e,"h",(function(){return u})),o.d(e,"i",(function(){return c})),o.d(e,"a",(function(){return d})),o.d(e,"c",(function(){return m}));var n=o("b775");function i(t){return Object(n["a"])({url:"/quartz/list",method:"post",data:t})}function a(){return Object(n["a"])({url:"/quartz/run/list",method:"post"})}function r(t){return Object(n["a"])({url:"/quartz/logs/list",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/quartz/deleteJob",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/quartz/pauseJob",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/quartz/resumeJob",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/quartz/runJob",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/quartz/addJob",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/quartz/editJobTime",method:"post",data:t})}},ddf3:function(t,e,o){"use strict";var n=o("018c"),i=o.n(n);i.a}}]);