(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0a24"],{"432a":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",[a("el-button",{staticClass:"form-btn-diy",attrs:{type:"success",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",height:"500",border:"",stripe:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"图片分类",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1==e.row.type?"首页":"")+"\n        "+t._s(2==e.row.type?"归心活动":"")+"\n        "+t._s(3==e.row.type?"专属权益":"")+"\n        "+t._s(4==e.row.type?"广告1":"")+"\n        "+t._s(5==e.row.type?"广告2":"")+"\n\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"图片",align:"center","class-name":"b_imgBox",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.path,onerror:"javascript:this.src='https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1560835537905&di=fefc36c4df18783fc167340937ee13e4&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201607%2F27%2F20160727132507_yP8fe.jpeg'",alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"跳转链接",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sendUrl))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return a.preventDefault(),t.toEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(a){return a.preventDefault(),t.doDel(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"b_pagebox"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.listSize},on:{"current-change":t.currentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"轮播编辑",visible:t.dialogFormVisible,width:"40%","close-on-click-modal":!1},on:{close:t.guanbi,"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类标题"}},[a("el-select",{attrs:{placeholder:"请选择活动分类"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.typeData,(function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片:"}},[a("el-upload",{staticClass:"avatar-uploader avatar-uploader-left",attrs:{action:t.uploadPath,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.path?a("img",{staticClass:"avatar",attrs:{src:t.form.path}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"upload-bottom-ts"},[t._v("只能上传jpg/png文件，且不超过1M，banner图片宽高比(2:1)广告图片宽高比(4.5:1)")])],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转链接"}},[a("el-input",{staticClass:"from_i_12",model:{value:t.form.sendUrl,callback:function(e){t.$set(t.form,"sendUrl",e)},expression:"form.sendUrl"}}),t._v(" "),a("div",{staticClass:"upload-bottom-ts"},[t._v("跳转小程序页面请输入/pages/detail/detail?id=xxx(xxx是活动管理下活动列表里面的编号)例如/pages/detail/detail?id=18")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},s=[],n=a("4ec3"),o=a("b775");function i(t){return Object(o["a"])({url:"/banner/list",method:"post",params:t})}function r(t){return Object(o["a"])({url:"/banner/commit/",method:"post",params:t})}function u(t){return Object(o["a"])({url:"/banner/detail/"+t,method:"post"})}function c(t){return Object(o["a"])({url:"/banner/delete/"+t,method:"post"})}var d={data:function(){return{typeData:[{value:1,label:"首页"},{value:2,label:"归心活动"},{value:3,label:"专属权益"},{value:4,label:"广告1"},{value:5,label:"广告2"}],dialogFormVisible:!1,form:{id:null,type:null,sendUrl:null,path:null},uploadPath:n["h"],list:null,listLoading:!0,listSize:0,select:{offset:1,limmit:10}}},created:function(){this.currentChange(1)},methods:{guanbi:function(){this.form={id:null,type:null,sendUrl:null,path:null}},onSubmit:function(){var t=this;console.log(this.form),r(this.form).then((function(e){1e4===e.status?(t.$message.success("添加成功"),t.dialogFormVisible=!1,t.currentChange(1)):2e4===e.status&&t.$message.error(e.message)}))},doDel:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c(t).then((function(t){1e4===t.status?(e.currentChange(1),e.$message({type:"success",message:"删除成功!"})):2e4===t.status&&e.$message.error(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},toEdit:function(t){var e=this;u(t).then((function(t){1e4===t.status?(e.form=t.data,e.dialogFormVisible=!0):2e4===t.status&&e.$message.error(t.message)}))},currentChange:function(t){var e=this;this.listLoading=!0,this.select.offset=t,i(this.select).then((function(t){1e4===t.status?(e.listLoading=!1,e.list=t.data.list,e.listSize=t.data.total):2e4===t.status&&e.$message.error(t.message)}))},beforeAvatarUpload:function(t){var e=t.size/1024/1024<5;return e||this.$message.error("上传图片大小不能超过 5MB!"),e},handleAvatarSuccess:function(t,e,a){1e4===t.status?(console.log(t.data),console.log(this.form),this.form.path=t.data):2e4===t.status&&(this.$message.error(t.message),a.pop())}}},m=d,f=a("2877"),p=Object(f["a"])(m,l,s,!1,null,null,null);e["default"]=p.exports}}]);