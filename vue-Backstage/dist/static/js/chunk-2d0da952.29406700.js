(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0da952"],{"6be5":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",[a("el-form",{staticClass:"searchForm",attrs:{inline:!0,model:t.select}},[a("el-form-item",{attrs:{label:"请选择日期"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.select.dateTime,callback:function(e){t.$set(t.select,"dateTime",e)},expression:"select.dateTime"}})],1),t._v(" "),a("div",{staticClass:"seachBtn"},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:function(e){return t.currentChange(1)}}}),t._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh",circle:""},on:{click:t.restSearch}})],1)],1),t._v(" "),a("el-button",{staticClass:"form-btn-diy",attrs:{type:"success",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",height:"500",border:"",stripe:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.date)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.title)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"图片展示",align:"center","class-name":"b_imgBox",width:"150"}},[t._v("\n      多图展示\n    ")]),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return a.preventDefault(),t.toEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(a){return a.preventDefault(),t.doDel(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"b_pagebox"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.listSize},on:{"current-change":t.currentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"精彩回顾",visible:t.dialogFormVisible,width:"40%","close-on-click-modal":!1},on:{close:t.guanbi,"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"请选择日期:"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"请输入标题:"}},[a("el-input",{staticClass:"from_i_12",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),a("div",{staticClass:"red-ts"},[t._v("请输入25个字符以内")])],1),t._v(" "),a("el-form-item",{attrs:{label:"请选择图片:"}},[a("el-upload",{attrs:{action:t.uploadPath,"list-type":"picture-card","file-list":t.pathsLoad,"on-success":t.handleAvatarSuccess,"on-remove":t.handleRemove,"before-upload":t.beforeAvatarUpload,multiple:""}},[a("i",{staticClass:"el-icon-plus"}),t._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"#e85555"},attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过1M,图片宽高比(3:2)")])])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},l=[],i=(a("ac6a"),a("28a5"),a("4ec3")),o=a("b775");function n(t){return Object(o["a"])({url:"/review/list",method:"post",params:t})}function r(t){return Object(o["a"])({url:"/review/commit/",method:"post",params:t})}function c(t){return Object(o["a"])({url:"/review/detail/"+t,method:"post"})}function u(t){return Object(o["a"])({url:"/review/delete/"+t,method:"post"})}var d={data:function(){return{dialogVisible:!1,paths:[],dialogFormVisible:!1,form:{id:null,title:null,date:null,paths:null},uploadPath:i["h"],list:null,listLoading:!0,listSize:0,select:{offset:1,limmit:10,dateTime:null},pathsLoad:[]}},created:function(){this.currentChange(1)},methods:{restSearch:function(){this.select={offset:1,limmit:10,dateTime:null},this.paths=[],this.currentChange(1)},guanbi:function(){this.form={id:null,title:null,sendUrl:null,path:null},this.paths=[]},onSubmit:function(){var t=this;this.paths&&(this.form.paths=this.paths.join(",")),r(this.form).then((function(e){1e4===e.status?(t.$message.success("添加成功"),t.dialogFormVisible=!1,t.paths=[],t.pathsLoad=[],t.currentChange(1)):2e4===e.status&&t.$message.error(e.message)}))},doDel:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(t).then((function(t){1e4===t.status?(e.currentChange(1),e.$message({type:"success",message:"删除成功!"})):2e4===t.status&&e.$message.error(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},toEdit:function(t){var e=this;c(t).then((function(t){if(1e4===t.status){if(e.form=t.data,console.log(t.data),t.data.paths){var a=t.data.paths.split(",");console.log(333),console.log(a),e.paths=[],e.pathsLoad=[],a.forEach((function(t){e.paths.push(t),e.pathsLoad.push({url:t,upUrl:t})}))}e.dialogFormVisible=!0}else 2e4===t.status&&e.$message.error(t.message)}))},currentChange:function(t){var e=this;this.listLoading=!0,this.select.offset=t,console.log(this.select),n(this.select).then((function(t){1e4===t.status?(e.listLoading=!1,e.list=t.data.list,e.listSize=t.data.total):2e4===t.status&&e.$message.error(t.message)}))},handleRemove:function(t,e){var a=[];e.forEach((function(t){a.push(t.upUrl)})),console.log("移除图片"),console.log(a),this.paths=a},handleAvatarSuccess:function(t,e,a){1e4===t.status?this.paths.push(t.data):2e4===t.status&&(this.$message.error(t.message),a.pop())},beforeAvatarUpload:function(t){var e=t.size/1024/1024<5;return e||this.$message.error("上传图片大小不能超过 5MB!"),e}}},m=d,f=a("2877"),h=Object(f["a"])(m,s,l,!1,null,null,null);e["default"]=h.exports}}]);