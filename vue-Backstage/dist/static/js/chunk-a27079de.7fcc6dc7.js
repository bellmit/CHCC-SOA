(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a27079de"],{"00ef":function(t,e,a){"use strict";var o=a("1609"),i=a.n(o);i.a},"156b":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{staticClass:"uploadHide",attrs:{action:t.uploadPath,name:"file","show-file-list":!1,"on-success":t.editorSuccess}}),t._v(" "),a("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{change:function(e){return t.geteditor(e)}},model:{value:t.editorCont,callback:function(e){t.editorCont=e},expression:"editorCont"}})],1)},i=[],n=a("4ec3"),l=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image","video"],["clean"]],s={props:["menpiaoeditor"],data:function(){return{editorOption:{modules:{toolbar:{container:l,handlers:{image:function(t){t?document.querySelector(".uploadHide input").click():this.quill.format("image",!1)}}}}},uploadPath:n["j"],editorCont:""}},watch:{menpiaoeditor:function(t){this.editorCont=t}},mounted:function(){},created:function(){this.editorCont=this.menpiaoeditor},methods:{geteditor:function(){this.$emit("do-editor",this.editorCont)},editorSuccess:function(t,e){try{var a=this.$refs.myQuillEditor.quill;if("10000"==t.status){var o=a.getSelection().index;a.insertEmbed(o,"image",t.data),a.setSelection(o+1)}else this.$message.error("图片插入失败")}catch(i){this.$message.error("图片插入失败")}finally{this.quillUpdateImg=!1}}}},r=s,u=(a("00ef"),a("2877")),c=Object(u["a"])(r,o,i,!1,null,"1ae0bd94",null);e["a"]=c.exports},1609:function(t,e,a){},8956:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",[a("el-button",{staticClass:"form-btn-diy",attrs:{type:"success",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加活动")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",height:"500",border:"",stripe:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分类标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.parentName)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.name)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动图片",align:"center","class-name":"b_imgBox",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.path,onerror:"javascript:this.src='https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1560835537905&di=fefc36c4df18783fc167340937ee13e4&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201607%2F27%2F20160727132507_yP8fe.jpeg'",alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.startTime)+"-"+t._s(e.row.endTime)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"报名时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.enrollStartTime)+"-"+t._s(e.row.enrollEndTime)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"报名地点",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.location)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"人数限制",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.limitCount)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"账号报名数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.memberCount)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return a.preventDefault(),t.toEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(a){return a.preventDefault(),t.doDel(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"b_pagebox"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.listSize},on:{"current-change":t.currentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"修改活动",visible:t.dialogFormVisible,width:"40%","close-on-click-modal":!1},on:{close:t.guanbi,"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类标题"}},[a("el-select",{attrs:{placeholder:"请选择活动分类"},model:{value:t.form.parentId,callback:function(e){t.$set(t.form,"parentId",e)},expression:"form.parentId"}},t._l(t.typeList,(function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.code}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动标题"}},[a("el-input",{staticClass:"from_i_12",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("div",{staticClass:"red-ts"},[t._v("请输入25个字符以内")])],1),t._v(" "),a("el-form-item",{attrs:{label:"活动时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","end-placeholder":"结束日期","default-time":["00:00:00"]},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"报名时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","end-placeholder":"结束日期","default-time":["00:00:00"]},model:{value:t.time2,callback:function(e){t.time2=e},expression:"time2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动地点"}},[a("el-input",{staticClass:"from_i_12",model:{value:t.form.location,callback:function(e){t.$set(t.form,"location",e)},expression:"form.location"}}),t._v(" "),a("div",{staticClass:"red-ts"},[t._v("请输入30个字符以内")])],1),t._v(" "),a("el-form-item",{attrs:{label:"人数限制"}},[a("el-input-number",{attrs:{min:1,max:1e6},model:{value:t.form.limitCount,callback:function(e){t.$set(t.form,"limitCount",e)},expression:"form.limitCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"账号报名数"}},[a("el-input-number",{attrs:{min:1,max:1e6},model:{value:t.form.memberCount,callback:function(e){t.$set(t.form,"memberCount",e)},expression:"form.memberCount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动图片"}},[a("el-upload",{staticClass:"avatar-uploader avatar-uploader-left",attrs:{action:t.uploadPath,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.path?a("img",{staticClass:"avatar",attrs:{src:t.form.path}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"upload-bottom-ts"},[t._v("只能上传jpg/png文件，且不超过1M，宽高比（1:1）")])],1),t._v(" "),a("el-form-item",{attrs:{label:"Banner"}},[a("el-upload",{staticClass:"avatar-uploader avatar-uploader-left",attrs:{action:t.uploadPath,"show-file-list":!1,"on-success":t.handleAvatarSuccess2,"before-upload":t.beforeAvatarUpload}},[t.form.infoPath?a("img",{staticClass:"avatar",attrs:{src:t.form.infoPath}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"upload-bottom-ts"},[t._v("只能上传jpg/png文件，且不超过1M，宽高比（2:1）")])],1),t._v(" "),a("el-form-item",{staticClass:"fwenben",attrs:{label:"活动介绍"}},[a("editor",{attrs:{menpiaoeditor:t.form.content},on:{"do-editor":t.geteditor}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},i=[],n=(a("6b54"),a("156b")),l=a("4ec3"),s=a("b775");function r(t){return Object(s["a"])({url:"/product/list",method:"post",params:t})}function u(t){return Object(s["a"])({url:"/product/commit/",method:"post",data:t})}function c(t){return Object(s["a"])({url:"/product/detail/"+t,method:"post"})}function m(t){return Object(s["a"])({url:"/product/delete/"+t,method:"post"})}function d(){return Object(s["a"])({url:"/product/type",method:"post"})}var f={components:{editor:n["a"]},data:function(){return{time:null,time2:null,dialogFormVisible:!1,form:{path:null,infoPath:null},uploadPath:l["j"],list:null,listLoading:!0,listSize:0,typeList:null,select:{offset:1,limmit:10}}},created:function(){this.currentChange(1),this.getType()},methods:{geteditor:function(t){this.form.content=t},guanbi:function(){console.log("关闭"),this.time=null,this.time2=null,this.form={path:null,infoPath:null}},onSubmit:function(){var t=this;this.time.length>0&&(this.form.startTime=this.time[0],this.form.endTime=this.time[1]),this.time2.length>0&&(this.form.enrollStartTime=this.time2[0],this.form.enrollEndTime=this.time2[1]),this.form.content.length<=0?this.$message.error("请填写活动介绍"):u(this.form).then((function(e){1e4===e.status?(t.$message.success("添加成功"),t.dialogFormVisible=!1,t.currentChange(1)):2e4===e.status&&t.$message.error(e.message)}))},getType:function(){var t=this;d().then((function(e){1e4===e.status?t.typeList=e.data:2e4===e.status&&t.$message.error(e.message)}))},doDel:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m(t).then((function(t){1e4===t.status?(e.currentChange(1),e.$message({type:"success",message:"删除成功!"})):2e4===t.status&&e.$message.error(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},toEdit:function(t){var e=this;c(t).then((function(t){1e4===t.status?(e.form=t.data,e.form.parentId=e.form.parentId.toString(),e.time=[null,null],e.time2=[null,null],e.time[0]=e.form.startTime,e.time[1]=e.form.endTime,e.time2[0]=e.form.enrollStartTime,e.time2[1]=e.form.enrollEndTime,e.dialogFormVisible=!0):2e4===t.status&&e.$message.error(t.message)}))},currentChange:function(t){var e=this;this.listLoading=!0,this.select.offset=t,r(this.select).then((function(t){1e4===t.status?(e.listLoading=!1,e.list=t.data.list,e.listSize=t.data.total):2e4===t.status&&e.$message.error(t.message)}))},beforeAvatarUpload:function(t){var e=t.size/1024/1024<1;return e||this.$message.error("上传图片大小不能超过 1MB!"),e},handleAvatarSuccess:function(t,e,a){1e4===t.status?this.form.path=t.data:2e4===t.status&&(this.$message.error(t.message),a.pop())},handleAvatarSuccess2:function(t,e,a){1e4===t.status?this.form.infoPath=t.data:2e4===t.status&&(this.$message.error(t.message),a.pop())}}},p=f,h=a("2877"),v=Object(h["a"])(p,o,i,!1,null,null,null);e["default"]=v.exports}}]);