(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c821c"],{5429:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",[a("el-button",{staticClass:"form-btn-diy",attrs:{type:"success",size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加分类")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",height:"500",border:"",stripe:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.id)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分类图片",align:"center","class-name":"b_imgBox",width:"150"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.path,onerror:"javascript:this.src='https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1560835537905&di=fefc36c4df18783fc167340937ee13e4&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201607%2F27%2F20160727132507_yP8fe.jpeg'",alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分类标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"英文标题",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.englishName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return"专属预约"!=e.row.name?[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return a.preventDefault(),t.toEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger"},nativeOn:{click:function(a){return a.preventDefault(),t.doDel(e.row.id)}}},[t._v("删除")])]:void 0}}],null,!0)})],1),t._v(" "),a("div",{staticClass:"b_pagebox"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.listSize},on:{"current-change":t.currentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加分类",visible:t.dialogFormVisible,width:"40%","close-on-click-modal":!1},on:{close:t.guanbi,"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类标题"}},[a("el-input",{staticClass:"from_i_12",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"英文标题"}},[a("el-input",{staticClass:"from_i_12",model:{value:t.form.englishName,callback:function(e){t.$set(t.form,"englishName",e)},expression:"form.englishName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"分类图片:"}},[a("el-upload",{staticClass:"avatar-uploader avatar-uploader-left",attrs:{action:t.uploadPath,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.path?a("img",{staticClass:"avatar",attrs:{src:t.form.path}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"upload-bottom-ts"},[t._v("只能上传jpg/png文件，且不超过1M")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)],1)},n=[],i=a("4ec3"),l=a("b775");function o(t){return Object(l["a"])({url:"/productType/list",method:"post",params:t})}function r(t){return Object(l["a"])({url:"/productType/commit/",method:"post",params:t})}function c(t){return Object(l["a"])({url:"/productType/detail/"+t,method:"post"})}function u(t){return Object(l["a"])({url:"/productType/delete/"+t,method:"post"})}var m={data:function(){return{dialogFormVisible:!1,form:{id:null,sendUrl:null,path:null},uploadPath:i["j"],list:null,listLoading:!0,listSize:0,select:{offset:1,limmit:10}}},created:function(){this.currentChange(1)},methods:{guanbi:function(){this.form={id:null,sendUrl:null,path:null}},onSubmit:function(){var t=this;r(this.form).then((function(e){1e4===e.status?(t.$message.success("添加成功"),t.dialogFormVisible=!1,t.currentChange(1)):2e4===e.status&&t.$message.error(e.message)}))},doDel:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(t).then((function(t){1e4===t.status?(e.currentChange(1),e.$message({type:"success",message:"删除成功!"})):2e4===t.status&&e.$message.error(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},toEdit:function(t){var e=this;c(t).then((function(t){1e4===t.status?(e.form=t.data,e.dialogFormVisible=!0):2e4===t.status&&e.$message.error(t.message)}))},currentChange:function(t){var e=this;this.listLoading=!0,this.select.offset=t,o(this.select).then((function(t){1e4===t.status?(e.listLoading=!1,e.list=t.data.list,e.listSize=t.data.total):2e4===t.status&&e.$message.error(t.message)}))},beforeAvatarUpload:function(t){var e=t.size/1024/1024<5;return e||this.$message.error("上传图片大小不能超过 5MB!"),e},handleAvatarSuccess:function(t,e,a){1e4===t.status?this.form.path=t.data:2e4===t.status&&(this.$message.error(t.message),a.pop())}}},d=m,f=a("2877"),p=Object(f["a"])(d,s,n,!1,null,null,null);e["default"]=p.exports}}]);